var plotlyTimeSeries=function(e){var t={};function o(l){if(t[l])return t[l].exports;var n=t[l]={i:l,l:!1,exports:{}};return e[l].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(l,n,function(t){return e[t]}.bind(null,n));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var l=function(){let e={setup_by_cat:{},setup_by_code:{},cat_by_code:{},current_time:new Date,defaultHistogramSetup:{opacity:.22},defaultChartColors:{"1f77b4":!1,"63b800":!1,e15b00:!1,"000000":!1,"0054af":!1,"8e3900":!1,"00b9e2":!1,ff00e5:!1,dcc539:!1},supportedPlotTypes:{scatter:!1,histogram:!1}},t={globalSetup:null,setupByCode:null,setupByCat:null},o={default:[],plot:{}},l=function(e,t){let l=o.default;null!==e&&void 0!==o.plot[e]&&(l=o.plot[e]);let n=l[1];return null===n&&(n=[]),n.push("req="+t),n=n.join("&"),l=l[0]+"?"+n,l},n=function(o,n){return Array.isArray(o)||(o=[o]),null!==t.setupByCode?new Promise((l,a)=>{Promise.resolve(t.setupByCode(o,n,e)).then((function(){for(let t=0;t<o.length;t++)void 0===e.setup_by_code[o[t]]&&(e.setup_by_code[o[t]]=null);l()}))}):new Promise((t,a)=>{let r=l(n);$.ajax({url:r,method:"GET",data:{codes:o},success:function(o){if(o.success&&void 0!==o.codesetup)for(let t in o.codesetup)e.setup_by_code[t]=o.codesetup[t];if(void 0!==o.codecat)for(let t in o.codecat)e.cat_by_code[t]=o.codecat[t];t()},error:function(){t()}})})},a=function(t){let o={unit:"",unithtml:"",plot_type:"scatter",normalize:!1,groupnorm:null,yaxis:null,opacityMap:{},desc:""};if(void 0!==e.cat_by_code[t]){let l=e.cat_by_code[t];void 0!==e.setup_by_cat[l]&&(o=e.setup_by_cat[l])}if(void 0!==e.setup_by_code[t]&&null!==e.setup_by_code[t])for(let l in e.setup_by_code[t])o[l]=e.setup_by_code[t][l];return o};return{setupValues:e,requestURLs:o,overWriteFunctions:t,setRequestURL:function(e,t,l){null===e?o.default=[t,l]:o.plot[e]=[t,l]},getCodeSetup:async function(t,o){return void 0!==e.setup_by_code[t]||await n(t,o),a(t)},getInitialPlotLayout:function(){var t={y_temp:"°C",y_percent:"SW",y_pres:"bar",y_presk:"kPa",y_tempdelta:"Δ°C",y_hour:"h",y_freq:"Hz",y_volume_ms:"m³/s",y_speed:"m/s",y_volume_ls:"L/s",y_volume_lh:"l/h",y_volume_mh:"m³/h",y_volume:"m³",y_power_k:"kW",y_power:"W",y_ppm:"ppm",y_ppb:"ppb",y_energy:"kWh",y_energy_wh:"Wh",y_eur:"EUR",y_rpm:"rpm",y_state:"St"},o={y_percent_stacked:{range:[0,100],fixedrange:!0},y_percent:{range:[0,101],fixedrange:!0},y_temp:{rangemode:"normal"},y_state:{range:[0,100],fixedrange:!0,autorange:!1}},l={showlegend:!1,autosize:!0,responsive:!0,margin:{b:8,t:20,l:40,r:40,pad:2},plot_bgcolor:"rgba(255,255,255,0)",bargap:.05,xaxis:{domain:[0,.9],hoverformat:"%Y-%m-%d %H:%M",tickformat:"%m-%d %H:%M",tickformatstops:[{dtickrange:[864e5,6048e5],value:"%m-%d"},{dtickrange:[6048e5,"M1"],value:"%m-%d"},{dtickrange:["M1","M12"],value:"%Y-%m"},{dtickrange:["M12",null],value:"%Y"}],rangeslider:{},type:"date",calendar:"gregorian",spikethickness:1,showspikes:!1,range:[new Date((new Date).setDate(e.current_time.getDate()-7)),e.current_time]}};let n=1,a={};var r={},i=[];for(let e in t){if(void 0!==a[e])continue;let s={titlefont:{color:"#686868"},tickfont:{color:"#668866"},side:"left",showline:!1,showgrid:!1,zeroline:!1,showticklabels:!1,xaxis:"x1",rangemode:"tozero",fixedrange:!1,hoverformat:".2f",hoverinfo:"y+name",spikethickness:1,showspikes:!1,autorange:!0},u={xref:"paper",yref:"paper",x:0,xanchor:"right",y:1,yanchor:"bottom",text:t[e],font:{size:12,color:"rgba(0,0,0,0)"},showarrow:!1};if(n>1&&(s.overlaying="y"),void 0!==o[e])for(let t in o[e])s[t]=o[e][t];n>1?(u.axis="yaxis"+n,l["yaxis"+n]=s,a[e]=n):(u.axis="yaxis",l.yaxis=s,a[e]=""),i.push(u),r[e]=0,n++}return[l,r,i,a,t]},fetchSetupByCode:n,fetchGlobalSetup:function(o){if(null!==t.globalSetup)return new Promise((o,l)=>{Promise.resolve(t.globalSetup(e)).then((function(){o()}))});let n=l(o,"global-setup");$.ajax({url:n,method:"GET",success:function(t){if(t.success){if(void 0!==t.codesetup)for(let o in t.codesetup)e.setup_by_code[o]=t.codesetup[o];if(void 0!==t.catsetup)for(let o in t.catsetup)e.setup_by_cat[o]=t.catsetup[o];if(void 0!==t.codecat)for(let o in t.codecat)e.cat_by_code[o]=t.codecat[o]}else alert("Could not load setup")}})},getQueryUrl:l}},n=function(e,t){let o=function(){let e=function(){let e=[],t=!1;var o=function(){if(e.length>0){t=!0;let l=e.shift(),n=l[0].apply(null,l[1]);void 0!==n&&"function"==typeof n.then?n.then((function(){void 0!==l[2]&&"function"==typeof l[2]&&l[2](),o()})):(void 0!==l[2]&&"function"==typeof l[2]&&l[2](),o())}else t=!1};return{addToQueue:function(l,n,a){e.push([l,n,a]),!1===t&&o()}}}(),t={JSON_PARSE:function(e){e.values=JSON.parse(e.values)},TYPE_CONVERSION:function(e){for(let t=0;t<e.values.length;t++)e.values[t][0]=new Date(e.values[t][0]).getTime()/1e3,e.values[t][1]=parseFloat(e.values[t][1]).toFixed(2)},CSV_SIMPLE:function(e){let t=e.values;t=t.split("\n"),t.length>0?e.values=o(t):e.values=[]},CSV_W_HEADER:function(e){let t=e.values;t=t.split("\n"),t.length>1?(t.shift(),e.values=o(t)):e.values=[]},REMOVE_REPEATING_ROW:function(e){let t=[],o=null;for(let l=0;l<e.values.length;l++)e.values[l][1]!==o&&(t.push(e.values[l]),o=e.values[l][1]);e.values=t}},o=function(e){for(let t=0;t<e.length;t++)e[t]=e[t].split(","),e[t]=[new Date(e[t][0]).getTime()/1e3,parseFloat(e[t][1]).toFixed(2)];return e};var l={x:function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],o=0;o<t.length;o++)try{e=new ActiveXObject(t[o]);break}catch(e){}return e},send:function(e,t,o,n,a){var r=l.x(),i=[];for(var s in o)i.push(encodeURIComponent(s)+"="+encodeURIComponent(o[s]));"GET"===t?(e+=i.length?"?"+i.join("&"):"",o=""):"POST"===t&&(o=i.join("&")),r.open(t,e,!0),r.onreadystatechange=function(){4===r.readyState&&n(r.responseText)},"POST"===t&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(let e in a)r.setRequestHeader(e,a[e]);r.send(o)},get:function(e,t,o,n){var a=[];for(var r in t)a.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));l.send(e+(a.length?"?"+a.join("&"):""),o,"GET",null,n)},post:function(e,t,o,n){var a=[];for(var r in t)a.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));l.send(e,o,"POST",a.join("&"),n)}};let a={updateButtonState:function(e,t,o){e.style.backgroundColor=o,t?e.classList.add("active"):e.classList.remove("active")},buttonStateUpdateCallback:function(e,t,o){}};return{queue:e,dataFormatters:t,ajax:l,findNewButtonColor:function(e){let t=null;if(void 0!==e&&(e=e.replace("#",""),!1===n.datasetColors[e]))return t="#"+e,n.datasetColors[e]=!0,t;for(let e in n.datasetColors)if(!1===n.datasetColors[e]){t="#"+e,n.datasetColors[e]=!0;break}return t},releaseButtonColor:function(e){e=e.replace("#",""),n.datasetColors[e]=!1},getRangeAsDate:function(e){let t=e[0],o=e[1];return"string"==typeof t&&(t=new Date(t)),"string"==typeof o&&(o=new Date(o)),[t,o]},setButtonStateByColor:function(e,t,o){null!==t?(e.visible=!0,e.color=t,n.activeCodes[o]=!0,void 0!==e.htmlelement?a.updateButtonState(e.htmlelement,!0,t):a.buttonStateUpdateCallback(o,!0,t)):(e.visible=!1,delete n.activeCodes[o],void 0!==e.htmlelement?a.updateButtonState(e.htmlelement,!1,"transparent"):a.buttonStateUpdateCallback(o,!1,"transparent"))},DOMupdates:a}}(),l={queryData:null},n={plot:{},elems:{},axes:{axisActiveCount:{},axisTitles:{},axisMap:{}},shapeGroups:{},datasetColors:{},pendingSetup:[],unit_to_axes:{},timeformat:"unix",activeCodes:{},modebar:{}},a={getStateAnnotations:function(e){var t,l,a=[],r=0;for(let s in e)if(e.hasOwnProperty(s)){let u=e[s].values,p=n.elems[s],d="#868686";!0===p.visible&&(void 0===n.datasetColors[868686]||!1===n.datasetColors[868686]?(n.datasetColors[868686]=!0,d="#868686"):u.length>0&&(d=o.findNewButtonColor()),o.setButtonStateByColor(p,d,s)),u.length>0&&(u[0][0]=new Date(1e3*u[0][0]));for(var i=0;i<u.length;i++){t=0,l=null;let e=parseInt(u[i][1]);0!==u[i][0]&&(t=u[i][0]);let o=u[i+1];void 0!==o?(o[0]=new Date(1e3*o[0]),l=o[0]):l=n.plot.layout.xaxis.range[1];let c=p.opacityMap[e];void 0===c&&(c=.04+.12*e);let f={id:"state_"+s+"_"+i,type:"rect",xref:"x",yref:"y"+n.axes.axisMap[p.yaxis],x0:t,y0:r,x1:l,y1:r+2,fillcolor:d,opacity:c,visible:p.visible,line:{width:0}};a.push(f),void 0===n.shapeGroups[s]&&(n.shapeGroups[s]=[]),n.shapeGroups[s].push(f)}!0===p.visible&&(r+=2)}return a},appendStateDataToPlot:function(e,o,l){let a=n.shapeGroups[e],r=null,i={};a.length>0?(r=a[0],i=r):i={id:"",type:"rect",xref:"x",yref:"y",x0:0,y0:0,x1:t.setupValues.current_time,y1:2,fillcolor:"#868686",opacity:.5,visible:!1,labeltext:"",line:{width:0}};let s=[],u=n.elems[e];o.length>0&&(o[0][0]=new Date(1e3*o[0][0]));for(let t=0;t<o.length;t++){let a=parseInt(o[t][1]),p=u.opacityMap[a];void 0===p&&(p=.04+.12*a);let d=0,c=null;0!==o[t][0]&&(d=o[t][0]),void 0!==o[t+1]&&0!==o[t+1][0]?(o[t+1][0]=new Date(1e3*o[t+1][0]),c=o[t+1][0]):c=n.plot.layout.xaxis.range[1];let f=!0;"prepend"===l&&void 0===o[t+1]&&null!==r&&(r.opacity===p?(f=!1,r.x0=d):c=r.x0);let y={id:"state_"+e+"_"+t,type:"rect",xref:"x",yref:"y"+n.axes.axisMap[u.yaxis],x0:d,y0:i.y0,x1:c,y1:i.y1,fillcolor:i.fillcolor,opacity:p,visible:u.visible,line:{width:0}};f&&s.push(y)}if("prepend"===l)for(let t=s.length-1;t>=0;t--)n.plot.layout.shapes.push(s[t]),n.shapeGroups[e].unshift(s[t]);if("append"===l)for(let t=0;t<s.length;t++)n.plot.layout.shapes.push(s[t]),n.shapeGroups[e].unshift(s[t])},toggleStateAnnotations:function(e,t,o){if(void 0!==n.shapeGroups[t])for(let l=0;l<n.shapeGroups[t].length;l++)n.shapeGroups[t][l].visible=e,n.shapeGroups[t][l].fillcolor=o}},r=function(a){return new Promise((r,i)=>{let s=function(e,t){let o=e.length,l=o-1;for(;l>=0&&!(e[l][0]<t);l-=10);let n=10;if(l<=0)n=10+l,l=0;else if(l===o-1)return e;for(let o=0;o<=n&&!(e[l][0]>=t);o++)l++;e.splice(l)},u=function(e,t){for(var o=0;o<e.length&&!(e[o][0]>t);o+=10);let l=10;o>=e.length-1?(l=10-(o-e.length),o=e.length):0===o&&(l=0,e[o][0]>t&&(o=-1));for(let n=0;n<l&&!(e[--o][0]<=t);n++);e.splice(0,o+1)},p=function(e){let[t,l]=o.getRangeAsDate(n.plot.layout.xaxis.range),a=parseInt(t.getTime()/1e3),r=parseInt(l.getTime()/1e3),i={codes:{}};for(let t in e){let o=e[t],l=n.elems[o],s=a,u=r;if(void 0!==l.index&&null!==l.index&&l.index.length>0){let e=n.plot.data[l.index[0]].x[0];e=parseInt(e.getTime()/1e3),u=e}else if(void 0!==n.shapeGroups[o]&&n.shapeGroups[o].length>0){let e=n.shapeGroups[o][0];u=parseInt(e.x0/1e3)}s>=u||(void 0!==l.group?void 0!==l.query_group&&!0===l.query_group?i[l.group]=[s,u]:(void 0===i[l.group]&&(i[l.group]={}),i[l.group][o]=[s,u]):i.codes[o]=[s,u])}return i}(a),d={};var c;d=null!==l.queryData?Promise.resolve(l.queryData(p)):new Promise((l,n)=>{o.ajax.send(t.getQueryUrl(e,"time-data"),"POST",c,(function(e){l(e)}))}),d.then((function(e){let t=function(e){let t=[{},{}];for(let l in e)for(let a in e[l]){let r=[],i=n.elems[a],p={mode:"append",structure:void 0===i.datastructure?"row":i.datastructure,values:[]};Array.isArray(e[l][a])?p.values=e[l][a]:(p.values=e[l][a].values,void 0!==e[l][a].format&&(r=e[l][a].format)),"y_state"!==i.yaxis&&!0!==i.isState||r.unshift("REMOVE_REPEATING_ROW");for(let e=0;e<r.length;e++){let t=r[e];void 0!==o.dataFormatters[t]&&"function"==typeof o.dataFormatters[t]&&o.dataFormatters[t](p)}if("row"===p.structure&&p.values.length>0){let e=p.values[0][0];if(e!==parseInt(e)){console.warn(a+": Time format after data formatters is not correct. Expected unix timestamp format");continue}let t=p.values[p.values.length-1][0];if(void 0!==i.index){let o=n.plot.data[i.index[0]].x,l=o.length;if(l>0){let n=o[0],a=o[l-1];n>e?(p.mode="prepend",t>n&&s(p.values,n)):e<a&&u(p.values,a)}}else if(void 0!==n.shapeGroups[a]){let o=n.shapeGroups[a].length;if(o>0){let l=n.shapeGroups[a][0].x0,r=n.shapeGroups[a][o-1].x1;l>e?(p.mode="prepend",t>l&&s(p.values,l)):e<r&&u(p.values,r)}}}"y_state"===i.yaxis||!0===i.isState?t[1][a]=p:t[0][a]=p}return t}(e);r(t)}))})};var i=function(e,t,o){return void 0!==e.structure&&"trace"===e.structure?function(e,t,o){let l=[[],[]],n=e.values;if(void 0!==t.normalize&&!1!==t.normalize);else{for(let e=0;e<n[0].length;e++)l[0].push(new Date(1e3*parseInt(n[0][e])));l[1]=n[1]}return[l[0],l[1]]}(e,t):function(e,t,o){let l=[[],[]],a=e.values,r=[];if(void 0!==t.normalize&&!1!==t.normalize){let e=600,i=2*e;!0!==t.normalize&&(e=t.normalize);let s=0,u=0,p=null,d=1;if(a.length>0&&(s=p[0],u=p[1],"prepend"===o&&(p=a[0])),"append"===o){if(void 0!==t.index){let e=n.plot.data[t.index[0]];e.length>0&&(s=e.x[e.x.length-1],u=e.y[e.y.length-1])}d=0}for(;d<a.length;d++){let t=parseInt(a[d][0]),o=t-s;if(!(o<e)){if(o<=i){l[0].push(new Date(1e3*t));let e=a[d][1]-u;l[1].push(e)}else r.push([s,t]);u=a[d][1],s=t}}if("prepend"===o){if(void 0!==t.index&&void 0!==t.firstvalue){let o=t.firstvalue,n=o[0]-s;n<=i&&n>=e&&(l[0].push(new Date(1e3*o[0])),l[1].push(o[1]-u))}null!==p&&(t.firstvalue=p)}}else if(null!==t.groupnorm){if(a.length>0){let e=a.length,o=t.legend.length;l[1]=new Array(o);for(let t=0;t<o;t++)l[1][t]=new Array(e);for(let t=0;t<e;t++){l[0].push(new Date(1e3*parseInt(a[t][0])));for(let e=0;e<o;e++)l[1][e][t]=a[t][e+1],l[1][e][t]=parseFloat(l[1][e][t])}}}else for(let e=0;e<a.length;e++)l[0].push(new Date(1e3*parseInt(a[e][0]))),l[1].push(a[e][1]),a[e][1]=parseFloat(a[e][1]);return[l[0],l[1]]}(e,t,o)},s=function(e,t,o){let l=n.elems[t];if(void 0!==o){let e=n.plot.data[l.index[0]];e.line.color=o,e.marker.color=o}Plotly.restyle(n.plot,"visible",e,l.index)},u=function(){let e=n.plot.layout,t=e.annotations,o={};for(let e in t)o[t[e].axis]=t[e];var l=[];for(let t in n.axes.axisActiveCount)if(n.axes.axisActiveCount[t]>0)l.push(t);else{let l="yaxis"+n.axes.axisMap[t];e[l].showline=!1,e[l].showgrid=!1,e[l].showticklabels=!1,e[l].side="right",e[l].anchor="x",e[l].position=0,e[l].title.font.color="rgba(0,0,0,0)",o[l].font.color="rgba(0,0,0,0)"}for(let t=0;t<l.length;t++){var a=l[t];let r="yaxis"+n.axes.axisMap[a];if(e[r].title.font.color="#868686",o[r].font.color="#868686",0===t)e[r].side="left",e[r].showline=!0,e[r].showgrid=!0,e[r].showticklabels=!0,o[r].x=0,o[r].xref="paper",o[r].xanchor="right";else{e[r].showline=!0,e[r].showgrid=!0,e[r].showticklabels=!0,e[r].side="right",void 0!==e.xaxis.range?o[r].x=e.xaxis.range[1]:o[r].x=(new Date).getTime(),o[r].xanchor="left";let l=.87+.03*t;t>1?(e[r].anchor="free",e[r].position=l):e[r].anchor="x",o[r].xref="paper",o[r].x=l}}},p=function(e){return new Promise((t,o)=>{0===e.length&&t(),r(e).then((function(e){let o=e[0],l=e[1],r={append:[[],[],[],[]],prepend:[[],[],[],[]]};for(let e in o){let t=n.elems[e],l=i(o[e],t,o[e].mode);null===t.groupnorm&&("append"===o[e].mode?(r.append[0].push(l[0]),r.append[1].push(l[1]),r.append[2].push(t.index[0])):(r.prepend[0].push(l[0]),r.prepend[1].push(l[1]),r.prepend[2].push(t.index[0])))}r.append[0].length>0&&Plotly.extendTraces(n.plot,{y:r.append[1],x:r.append[0]},r.append[2]),r.prepend[0].length>0&&Plotly.prependTraces(n.plot,{y:r.prepend[1],x:r.prepend[0]},r.prepend[2]);for(let e in l)a.appendStateDataToPlot(e,l[e].values,l[e].mode);t()}))})};async function d(l){let s=[],p={},d={};if(0!==l.length){if(l[0]instanceof HTMLElement)for(let e=0;e<l.length;e++){let t=l[e].getAttribute("pl-code"),o=l[e].classList.contains("active");void 0===n.elems[t]?(n.pendingSetup.push(t),d[t]=l[e]):n.elems[t].htmlelement=l[e],o&&s.push(t);let a=l[e].getAttribute("y-axis");null!==a&&(p[t]=a),c.registerButtonClick(l[e])}else for(let e=0;e<l.length;e++){let t=l[e].code,o=l[e].active;void 0===n.elems[t]&&n.pendingSetup.push(t),o&&s.push(t);let a=l[e].yaxis;void 0!==a&&(p[t]=a)}if(n.pendingSetup.length>0){await t.fetchSetupByCode(n.pendingSetup,e);for(let o=0;o<n.pendingSetup.length;o++){let l=n.pendingSetup[o];n.elems[l]=await t.getCodeSetup(l,e),void 0!==d[l]&&(n.elems[l].htmlelement=d[l])}}s.forEach(e=>n.elems[e].visible=!0);for(let e in p)n.elems[e].yaxis=p[e];return n.pendingSetup=[],f=s,new Promise((e,l)=>{0===f.length&&e(),r(f).then((function(l){let r=n.plot.layout,s=l[0],p=l[1];var d=[];for(let e in s){if(void 0!==n.elems[e]&&void 0!==n.elems[e].index)continue;let l=n.elems[e];var c=l.fixedcolor,f=l.yaxis;let a=l.plot_type,u=i(s[e],l,s[e].mode);null==f&&(f="y_temp");let p=l.desc;if(!0===l.visible&&(null!==c&&""!==c&&void 0!==c||(c=o.findNewButtonColor()),o.setButtonStateByColor(l,c,e),l.visible&&n.axes.axisActiveCount[f]++),null!==l.groupnorm){let t=l.legend,o=[];if(void 0!==t)for(let e=0;e<t.length;e++)o.push(t[e][2]);if(o.length>0){let e=o.join(",");o="linear-gradient(-45deg, "+e+")"}else o="#868686";void 0!==l.htmlelement&&l.htmlelement.setAttribute("bck-col",o);for(let o=0;o<t.length;o++)(y={id:e+"_"+o,visible:l.visible,name:t[o][0],x:u[0],y:u[1][o],yaxis:"y"+n.axes.axisMap[f],marker:{color:t[o][1],size:2},line:{color:t[o][1],width:1},fillcolor:t[o][1],mode:"lines",type:a,stackgroup:e,xcalendar:"gregorian",ycalendar:"gregorian",plfirstvalue:u[2]}).groupnorm=l.groupnorm,d.push(y)}else{var y={id:e,visible:l.visible,name:p,x:u[0],y:u[1],yaxis:"y"+n.axes.axisMap[f],marker:{color:c,size:2},line:{color:c,width:1},mode:"lines",type:a,xcalendar:"gregorian",ycalendar:"gregorian",plfirstvalue:u[2]};let o=36e5;"histogram"===a&&(y.autobiny=!0,y.histfunc="sum",y.marker.line={color:y.marker.color,width:1},y.marker.opacity=t.setupValues.defaultHistogramSetup.opacity,y.xbins={size:o},sharedBinningDataset[e]=y,void 0===r.updatemenus&&(r.updatemenus=updateMenus)),d.push(y)}}let g=a.getStateAnnotations(p);n.plot.layout.shapes=n.plot.layout.shapes.concat(g),u();let h=n.plot.data.length;for(Plotly.addTraces(n.plot,d);h<n.plot.data.length;h++){let e=n.plot.data[h].id;void 0!==n.plot.data[h].stackgroup&&(e=n.plot.data[h].stackgroup),void 0===n.elems[e].index&&(n.elems[e].index=[]),n.elems[e].index.push(h)}e()}))});var f}}var c=function(){let e=function(e){void 0===e&&(e=this.getAttribute("pl-code"));let t=n.elems[e];if(void 0!==t)if(t.visible)"y_state"===t.yaxis||!0===t.isState?a.toggleStateAnnotations(!1,e):s(!1,e),o.releaseButtonColor(t.color),delete n.activeCodes[e],n.axes.axisActiveCount[t.yaxis]--,void 0!==t.htmlelement?o.DOMupdates.updateButtonState(t.htmlelement,!1,"transparent"):o.DOMupdates.buttonStateUpdateCallback(e,!1,"transparent"),t.visible=!1,u(),Plotly.redraw(n.plot);else{let r=t.fixedColor;if(null==r&&(r=o.findNewButtonColor(t.color)),o.setButtonStateByColor(t,r,e),!1===t.visible)return;n.axes.axisActiveCount[t.yaxis]++,"y_state"===t.yaxis||!0===t.isState?a.toggleStateAnnotations(!0,e,r):(s(!0,e,r),u(),l(),Plotly.redraw(n.plot)),o.queue.addToQueue(p,[[e]],(function(){Plotly.redraw(n.plot)}))}else console.warn("Invalid code in toggleDatasetState: "+e)};var t=[null,null];let l=function(){let e=n.plot.calcdata,t={};for(let o=0;o<e.length;o++){let l=e[o][0].trace;if(0==l.visible)continue;let n=l.yaxis,a=l._extremes[n],r=a.min[0].val,i=a.max[0].val;void 0!==r&&(void 0===t[n]?t[n]=[r,i]:(t[n][0]>r&&(t[n][0]=r),t[n][1]<i&&(t[n][1]=i)))}let o=!1,l=n.modebar.querySelector(".modebar-btn[data-val='pan']");null!==l&&(o=l.classList.contains("active"));for(let e in t){let l=t[e],a=.05*(l[1]-l[0]);l[0]=l[0]-a,l[1]=l[1]+a;let r=e.replace("y",""),i=n.plot.layout["yaxis"+r].range;if(o){if(i[0]<l[0]){let e=i[1]-i[0];i[0]=l[0],i[1]=l[0]+e}else if(i[1]>l[1]){let e=i[1]-i[0];i[1]=l[1],i[0]=l[1]-e}}else i[0]<l[0]&&(i[0]=l[0]),i[1]>l[1]&&(i[1]=l[1]);i[0]>i[1]&&(i[1]=i[0]+a)}};var r=function(){(function(e){if(null===t)return t=e,!0;let o=!1;return t[0]>e[0]&&(o=!0),t[1]<e[1]&&(o=!0),t=e,o})(o.getRangeAsDate(n.plot.layout.xaxis.range))&&o.queue.addToQueue(p,[Object.keys(n.activeCodes)],(function(){!function(){let e=o.getRangeAsDate(n.plot.layout.xaxis.range),t=n.plot.data,l=null,a=null;for(let e in t){let o=t[e].x.length;if(o>0){let n=t[e].x[0],r=t[e].x[o-1];(null===l||n<l)&&(l=n),(null===a||r>a)&&(a=r)}}let[r,i]=e,s=!1;r<l&&(n.plot.layout.xaxis.range[0]=l,s=!0),i>a&&(n.plot.layout.xaxis.range[1]=a,s=!0)}(),l(),Plotly.redraw(n.plot)}))},i=0;return{registerButtonClick:function(t){t.addEventListener("click",(function(){e.call(this)}))},registerPlotRelayoutCallback:function(){n.plot.on("plotly_relayout",(function(e){i++,setTimeout((function(){--i<=0&&r()}),200)}))},toggleDatasetState:e}}();let f={createPlot:function(o){return new Promise(l=>{let a=o;if(null===a){a=function(e){let t=document.createElement("div"),o=document.createElement("div");return e.appendChild(t),e.appendChild(o),[t,o]}(document.getElementById(e))}let r=t.getInitialPlotLayout();!function(e){for(let t in e){let o=e[t].replace(/[^\x20-\x7E]/g,"");void 0===n.unit_to_axes[o]&&(n.unit_to_axes[o]=[]),n.unit_to_axes[o].push(t)}}(r[4]),n.axes.axisActiveCount=r[1],n.axes.axisTitles=r[2],n.axes.axisMap=r[3],r[0].annotations=r[2],r[0].shapes=[],console.log(a),Plotly.newPlot(a[0],[],r[0]).then((function(e){n.plot=e,c.registerPlotRelayoutCallback(),n.modebar=e.querySelector(".modebar-container"),l()}));for(let e in t.setupValues.defaultChartColors)n.datasetColors[e]=t.setupValues.defaultChartColors[e]})},registerButton:d,fetchGlobalSetup:t.fetchGlobalSetup};return{overWriteFunctions:l,registerButtons:function(e,t){o.queue.addToQueue(d,[e],t)},ajax:o.ajax,domUpdaters:o.DOMupdates,toggleDataSetState:c.toggleDatasetState,executeFunc:function(e,t){void 0!==f[e]&&o.queue.addToQueue(f[e],t)}}},a=function(){var e,t={},o=function(){let e={plotly:!1};if("undefined"==typeof Plotly)console.error("Could not find Plotly.js - download from https://github.com/plotly/plotly.js/");else if(void 0===Plotly.Plots||void 0===Plotly.Plots.allTypes)console.error("Invalid Plotly.js instance - Unable to find supported categories from Plotly.Plots.allTypes");else{let t={scatter:!1,histogram:!1},o={scatter:!1};for(let e=0;e<Plotly.Plots.allTypes.length;e++){let l=Plotly.Plots.allTypes[e];void 0!==t[l]&&(t[l]=!0,void 0!==o[l]&&(o[l]=!0))}let l=[];for(let e in o)!1===o[e]&&l.push(e);l.length>0?console.error("Could not find following required plot type(s): "+l.join(", ")):e.plotly=!0,e.plotTypes=t}return e};o();let a=function(t,n,a){(e=l()).setupValues.supportedPlotTypes=o().plotTypes,e.setRequestURL(t,n,a)};return{getInstance:function(o,l,r){let[i,s]=function(e){let t="plot",o=null;if("string"===typeof e)t=e;else if(Array.isArray(e)){let l=e[0].id;t=null!==l?l:e[0].parentElement.id,o=e}return[t,o]}(o);return e||a(null,l,r),void 0===t[i]&&(t[i]=function(e,t,o){let l=n(e,t);return l.executeFunc("fetchGlobalSetup",[]),l.executeFunc("createPlot",[o]),l}(i,e,s)),t[i]},getSetup:function(t,o){return e||a(null,t,o),e}}}();t.default=a}]).default;